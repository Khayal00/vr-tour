<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>VR Tour with Image Hotspots & Glow</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/supermedium/aframe-effects/dist/aframe-effects.min.js"></script>
<style>
  body { margin:0; overflow:hidden; }
</style>
</head>
<body>
<a-scene effects="bloom" bloom="strength: 2.5; radius: 0.5; threshold: 0.1">
  <a-sky id="sky" rotation="0 -90 0"></a-sky>

  <!-- الكاميرا مع النص -->
  <a-entity id="cameraRig" camera look-controls position="0 1.6 0">
    <a-cursor
      rayOrigin="mouse"
      raycaster="objects: .hotspot"
      fuse="false"
      geometry="primitive: ring; radiusInner:0.02; radiusOuter:0.03"
      material="color:white; shader: flat">
    </a-cursor>

    <!-- طبقة التلاشي -->
    <a-plane id="fadePlane" position="0 0 -0.5" width="2" height="2"
             material="color:black; opacity:0; transparent:true"
             animation__fadeout="startEvents: fadeout; property: material.opacity; from:0; to:1; dur:500"
             animation__fadein="startEvents: fadein; property: material.opacity; from:1; to:0; dur:500">
    </a-plane>

    <!-- النص الثابت أمام الكاميرا -->
    <a-entity id="roomLabel" position="0 0 -2" text="value: ; align:center; color:white; width:4;"></a-entity>
  </a-entity>

  <!-- حاوية الهوت سبوت -->
  <a-entity id="hotspotContainer"></a-entity>

  <a-assets>
    <audio id="transitionSound" src="assets/transition.mp3"></audio>
    <img id="hotspotImg" src="assets/hotspot.png">
    <img id="Living_Room" src="assets/Living_Room.jpg">
    <img id="Kitchen" src="assets/Kitchen.jpg">
    <img id="Reception" src="assets/Reception.jpg">
    <img id="Corridor" src="assets/Corridor.jpg">
    <img id="Bathroom" src="assets/Bathroom.jpg">
    <img id="Bedroom" src="assets/Bedroom.jpg">
  </a-assets>
</a-scene>

<script>
const scenes = {
  Living_Room:{src:'#Living_Room', label:'Welcome to Living Room', hotspots:[{target:'Kitchen', position:'-3 1.6 4'},{target:'Reception', position:'-3 1.6 -1.7'},{target:'Corridor', position:'3 1.6 3'}]},
  Kitchen:{src:'#Kitchen', label:'Welcome to Kitchen', hotspots:[{target:'Living_Room', position:'4 1.6 -7'}]},
  Reception:{src:'#Reception', label:'Welcome to Reception', hotspots:[{target:'Living_Room', position:'5 1.6 -1'}]},
  Corridor:{src:'#Corridor', label:'Welcome to Corridor', hotspots:[{target:'Bathroom', position:'3 1.6 -0.5'},{target:'Bedroom', position:'-0.2 1.6 -3.5'},{target:'Living_Room', position:'1 1.6 3'}]},
  Bathroom:{src:'#Bathroom', label:'Welcome to Bathroom', hotspots:[{target:'Corridor', position:'-1 1.6 4'}]},
  Bedroom:{src:'#Bedroom', label:'Welcome to Bedroom', hotspots:[{target:'Corridor', position:'-0.5 1.6 4'}]}
};

const roomLabel = document.getElementById('roomLabel');

function changeScene(sceneName){
  const sky=document.getElementById('sky');
  const hotspotContainer=document.getElementById('hotspotContainer');
  const fadePlane=document.getElementById('fadePlane');
  const audio=document.getElementById('transitionSound');

  roomLabel.setAttribute('visible', false);
  fadePlane.emit('fadeout');

  setTimeout(()=>{
    sky.setAttribute('src', scenes[sceneName].src);
    hotspotContainer.innerHTML='';

    scenes[sceneName].hotspots.forEach(hs=>{
      // الهوت سبوت كـ Plane مباشر
      const hotspot = document.createElement('a-plane');
      hotspot.setAttribute('class','hotspot');
      hotspot.setAttribute('position', hs.position);
      hotspot.setAttribute('width', 0.6);
      hotspot.setAttribute('height', 0.6);
      hotspot.setAttribute('material','src: #hotspotImg; transparent:true; shader:standard');
      hotspot.setAttribute('look-at','#cameraRig');

      // التوهج
      const glow = document.createElement('a-plane');
      glow.setAttribute('position','0 0 0.01');
      glow.setAttribute('width','0.8');
      glow.setAttribute('height','0.8');
      glow.setAttribute('material','color:white; emissive:white; emissiveIntensity:3; opacity:0.3; transparent:true; shader:standard');
      hotspot.appendChild(glow);

      // حركة عند المرور
      hotspot.setAttribute('animation__hover','property: scale; startEvents: mouseenter; to:1.3 1.3 1.3; dur:200');
      glow.setAttribute('animation__glow_hover','property: material.emissiveIntensity; startEvents: mouseenter; to:6; dur:200');
      hotspot.setAttribute('animation__leave','property: scale; startEvents: mouseleave; to:1 1 1; dur:200');
      glow.setAttribute('animation__glow_leave','property: material.emissiveIntensity; startEvents: mouseleave; to:3; dur:200');

      // عند الضغط
      hotspot.addEventListener('click', ()=>{
        audio.pause();
        audio.currentTime=0;
        audio.play().catch(()=>{});
        changeScene(hs.target);
      });

      hotspotContainer.appendChild(hotspot);
    });

    fadePlane.emit('fadein');
    roomLabel.setAttribute('text','value:' + scenes[sceneName].label);
    roomLabel.setAttribute('visible', true);
  },500);
}

window.addEventListener('load', ()=>{
  document.body.addEventListener('click', ()=>{
    const audio=document.getElementById('transitionSound');
    audio.play().catch(()=>{});
  }, {once:true});

  changeScene('Living_Room');
});
</script>
</body>
</html>
+
