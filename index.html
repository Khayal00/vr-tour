<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>360° Virtual Reality Tour</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-animation-component@5.1.2/dist/aframe-animation-component.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            overflow: hidden;
            height: 100vh;
            background: #000;
        }
        
        #welcome-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
            z-index: 100;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            transition: opacity 1s ease;
        }
        
        .welcome-content {
            text-align: center;
            padding: 20px;
            max-width: 800px;
        }
        
        h1 {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
            background: linear-gradient(to right, #ff8a00, #da1b60);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            font-size: 1.5rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }
        
        .instructions {
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: left;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            color: #ff8a00;
        }
        
        .instructions ul {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            line-height: 1.6;
        }
        
        .loading-container {
            width: 80%;
            max-width: 500px;
            height: 30px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin: 30px 0;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .loading-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            border-radius: 15px;
            transition: width 0.3s ease;
        }
        
        .loading-text {
            margin-top: 10px;
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .start-button {
            margin-top: 30px;
            padding: 15px 50px;
            font-size: 1.2rem;
            background: linear-gradient(90deg, #ff8a00, #e52e71);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            letter-spacing: 1px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
        }
        
        .scene-title {
            position: absolute;
            top: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: white;
            font-size: 2rem;
            z-index: 10;
            background: rgba(0, 0, 0, 0.5);
            padding: 10px;
            text-transform: uppercase;
            letter-spacing: 3px;
            font-weight: bold;
            animation: fadeIn 2s ease;
        }
        
        .info-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 15px;
            border-radius: 10px;
            max-width: 300px;
            z-index: 10;
            font-size: 0.9rem;
            line-height: 1.5;
        }
        
        .info-panel h3 {
            color: #ff8a00;
            margin-bottom: 10px;
        }
        
        .hotspot-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            white-space: nowrap;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 5;
        }
        
        .fade-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            opacity: 0;
            z-index: 50;
            pointer-events: none;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
        
        .hotspot {
            animation: pulse 2s infinite ease-in-out;
        }
        
        .navigation-dots {
            position: absolute;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 10;
        }
        
        .dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .dot.active {
            background: #ff8a00;
            transform: scale(1.3);
        }
    </style>
</head>
<body>
    <!-- Welcome Screen -->
    <div id="welcome-screen">
        <div class="welcome-content">
            <h1>VIRTUAL REALITY TOUR</h1>
            <p class="subtitle">Explore our luxury property in immersive 360°</p>
            
            <div class="instructions">
                <h3>How to Navigate:</h3>
                <ul>
                    <li><strong>Desktop:</strong> Click and drag to look around. Click on pulsating hotspots to move between rooms.</li>
                    <li><strong>Mobile:</strong> Move your device to look around. Tap on hotspots to navigate.</li>
                    <li><strong>VR Headsets:</strong> For the best experience, use with Meta Quest or similar VR headset.</li>
                </ul>
            </div>
            
            <div class="loading-container">
                <div class="loading-bar" id="loading-bar"></div>
            </div>
            <div class="loading-text" id="loading-text">Loading assets... 0%</div>
            
            <button class="start-button" id="start-button">START EXPERIENCE</button>
        </div>
    </div>
    
    <!-- Scene Title -->
    <div class="scene-title" id="scene-title">RECEPTION</div>
    
    <!-- Info Panel -->
    <div class="info-panel">
        <h3>Property Features</h3>
        <p>• 5 Bedrooms • 4 Bathrooms • Modern Kitchen</p>
        <p>• Spacious Living Room • Luxurious Reception</p>
        <p>• Panoramic Views • Smart Home System</p>
    </div>
    
    <!-- Navigation Dots -->
    <div class="navigation-dots" id="navigation-dots"></div>
    
    <!-- Fade Overlay for Transitions -->
    <div class="fade-overlay" id="fade-overlay"></div>
    
    <!-- A-Frame Scene -->
    <a-scene vr-mode-ui="enabled: true">
        <!-- Camera with cursor -->
        <a-entity id="rig" movement-controls="speed: 0.1" position="0 1.6 0">
            <a-entity camera look-controls="pointerLockEnabled: true" position="0 0 0">
                <a-cursor id="cursor"></a-cursor>
            </a-entity>
        </a-entity>
        
        <!-- Sky (360 image) -->
        <a-sky id="scene-sky" src="#reception" rotation="0 -90 0"></a-sky>
        
        <!-- Hotspots will be added dynamically -->
    </a-scene>

    <script>
        // Scene data with connections
        const scenes = {
            "Reception": {
                connections: ["Living_Room"],
                hotspotPositions: [{theta: 0, phi: 0}],
                title: "RECEPTION AREA",
                description: "Elegant reception with marble floors and modern decor"
            },
            "Living_Room": {
                connections: ["Reception", "Kitchen", "Corridor"],
                hotspotPositions: [
                    {theta: 180, phi: 0},   // Reception
                    {theta: 90, phi: 0},    // Kitchen
                    {theta: -90, phi: 0}     // Corridor
                ],
                title: "LIVING ROOM",
                description: "Spacious living area with panoramic windows"
            },
            "Kitchen": {
                connections: ["Living_Room"],
                hotspotPositions: [{theta: 180, phi: 0}],
                title: "MODERN KITCHEN",
                description: "State-of-the-art kitchen with premium appliances"
            },
            "Corridor": {
                connections: ["Living_Room", "Bedroom", "Bathroom"],
                hotspotPositions: [
                    {theta: 0, phi: 0},     // Living Room
                    {theta: 90, phi: 0},    // Bedroom
                    {theta: -90, phi: 0}     // Bathroom
                ],
                title: "MAIN CORRIDOR",
                description: "Central corridor connecting to private areas"
            },
            "Bedroom": {
                connections: ["Corridor"],
                hotspotPositions: [{theta: 180, phi: 0}],
                title: "MASTER BEDROOM",
                description: "Luxurious master bedroom with ensuite bathroom"
            },
            "Bathroom": {
                connections: ["Corridor"],
                hotspotPositions: [{theta: 0, phi: 0}],
                title: "LUXURY BATHROOM",
                description: "Spa-like bathroom with premium finishes"
            }
        };

        // Current scene
        let currentScene = "Reception";
        let hotspots = [];
        
        // DOM elements
        const welcomeScreen = document.getElementById('welcome-screen');
        const loadingBar = document.getElementById('loading-bar');
        const loadingText = document.getElementById('loading-text');
        const startButton = document.getElementById('start-button');
        const sceneTitle = document.getElementById('scene-title');
        const fadeOverlay = document.getElementById('fade-overlay');
        const navigationDots = document.getElementById('navigation-dots');
        const cursor = document.getElementById('cursor');
        
        // Image assets (in a real app, these would be actual 360 images)
        const sceneImages = {
            "Reception": "assets/Reception.jpg",
            "Living_Room": "assets/Living_Room.jpg",
            "Kitchen": "https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg",
            "Corridor": "https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg",
            "Bedroom": "https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg",
            "Bathroom": "https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg"
        };
        
        // Simulate loading progress
        function simulateLoading() {
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 10;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    loadingText.textContent = "Ready to start!";
                    startButton.disabled = false;
                }
                loadingBar.style.width = `${progress}%`;
                loadingText.textContent = `Loading assets... ${Math.floor(progress)}%`;
            }, 300);
        }
        
        // Start the experience
        function startExperience() {
            // Fade out welcome screen
            welcomeScreen.style.opacity = "0";
            
            setTimeout(() => {
                welcomeScreen.style.display = "none";
                // Initialize the first scene
                loadScene(currentScene);
            }, 1000);
        }
        
        // Create navigation dots
        function createNavigationDots() {
            navigationDots.innerHTML = '';
            Object.keys(scenes).forEach((scene, index) => {
                const dot = document.createElement('div');
                dot.className = `dot ${scene === currentScene ? 'active' : ''}`;
                dot.dataset.scene = scene;
                dot.addEventListener('click', () => {
                    fadeToScene(scene);
                });
                navigationDots.appendChild(dot);
            });
        }
        
        // Convert spherical coordinates to Cartesian
        function sphericalToCartesian(theta, phi, radius = 5) {
            const thetaRad = theta * (Math.PI / 180);
            const phiRad = phi * (Math.PI / 180);
            
            return {
                x: -radius * Math.sin(thetaRad) * Math.cos(phiRad),
                y: radius * Math.sin(phiRad),
                z: -radius * Math.cos(thetaRad) * Math.cos(phiRad)
            };
        }
        
        // Create hotspots for current scene
        function createHotspots() {
            // Remove existing hotspots
            hotspots.forEach(hotspot => {
                if (hotspot.parentNode) {
                    hotspot.parentNode.removeChild(hotspot);
                }
            });
            hotspots = [];
            
            const sceneData = scenes[currentScene];
            const scene = document.querySelector('a-scene');
            
            sceneData.connections.forEach((targetScene, index) => {
                const position = sceneData.hotspotPositions[index];
                const {x, y, z} = sphericalToCartesian(position.theta, position.phi);
                
                // Create hotspot entity
                const hotspot = document.createElement('a-entity');
                hotspot.setAttribute('class', 'hotspot');
                hotspot.setAttribute('position', `${x} ${y} ${z}`);
                hotspot.setAttribute('geometry', 'primitive: circle; radius: 0.3');
                hotspot.setAttribute('material', 'shader: flat; src: #hotspot-img; transparent: true');
                hotspot.setAttribute('look-at', '[camera]');
                hotspot.setAttribute('animation', 'property: scale; to: 1.2 1.2 1.2; dur: 1000; easing: easeInOutSine; loop: true; dir: alternate');
                
                // Add click event to switch scene
                hotspot.addEventListener('click', () => {
                    fadeToScene(targetScene);
                });
                
                // Add mouseenter/mouseleave events
                hotspot.addEventListener('mouseenter', () => {
                    cursor.setAttribute('material', 'color: #ff8a00');
                    cursor.setAttribute('scale', '1.5 1.5 1.5');
                    
                    // Create label
                    const label = document.createElement('div');
                    label.className = 'hotspot-label';
                    label.textContent = targetScene.replace(/_/g, ' ');
                    label.style.left = `${event.clientX}px`;
                    label.style.top = `${event.clientY - 40}px`;
                    document.body.appendChild(label);
                    
                    hotspot.label = label;
                    setTimeout(() => {
                        if (label) label.style.opacity = '1';
                    }, 10);
                });
                
                hotspot.addEventListener('mouseleave', () => {
                    cursor.setAttribute('material', 'color: #ffffff');
                    cursor.setAttribute('scale', '1 1 1');
                    
                    if (hotspot.label) {
                        hotspot.label.style.opacity = '0';
                        setTimeout(() => {
                            if (hotspot.label && hotspot.label.parentNode) {
                                hotspot.label.parentNode.removeChild(hotspot.label);
                            }
                        }, 300);
                    }
                });
                
                scene.appendChild(hotspot);
                hotspots.push(hotspot);
            });
        }
        
        // Load a new scene
        function loadScene(sceneName) {
            currentScene = sceneName;
            const sceneData = scenes[sceneName];
            
            // Update scene title
            sceneTitle.textContent = sceneData.title;
            
            // Update sky
            const sky = document.getElementById('scene-sky');
            sky.setAttribute('src', sceneImages[sceneName]);
            
            // Create hotspots
            createHotspots();
            
            // Update navigation dots
            createNavigationDots();
        }
        
        // Fade to a new scene
        function fadeToScene(sceneName) {
            // Start fade out
            fadeOverlay.style.opacity = '1';
            fadeOverlay.style.transition = 'opacity 0.8s ease';
            
            setTimeout(() => {
                // Change scene
                loadScene(sceneName);
                
                // Fade in
                fadeOverlay.style.opacity = '0';
            }, 800);
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Create a hotspot image asset
            const hotspotImg = document.createElement('img');
            hotspotImg.id = 'hotspot-img';
            hotspotImg.src = 'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><circle cx="50" cy="50" r="45" fill="none" stroke="%23ff8a00" stroke-width="8" stroke-opacity="0.8"/><circle cx="50" cy="50" r="30" fill="%23ff8a00" fill-opacity="0.6"/></svg>';
            document.querySelector('a-assets').appendChild(hotspotImg);
            
            // Start loading simulation
            simulateLoading();
            
            // Event listeners
            startButton.addEventListener('click', startExperience);
            
            // Create navigation dots
            createNavigationDots();
        });
        
        // Update cursor position for labels
        document.addEventListener('mousemove', (event) => {
            const labels = document.querySelectorAll('.hotspot-label');
            labels.forEach(label => {
                label.style.left = `${event.clientX}px`;
                label.style.top = `${event.clientY - 40}px`;
            });
        });
    </script>
</body>
</html>
