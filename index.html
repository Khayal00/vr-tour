<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>VR Tour â€” Hotspots with Glow</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <style>
      body, html {
        margin: 0; padding: 0; overflow: hidden; height: 100%; width: 100%;
      }
      #welcomeScreen {
        position: absolute; top: 0; left: 0;
        width: 100%; height: 100%;
        background: #000; display: flex;
        flex-direction: column; align-items: center; justify-content: center;
        color: #fff; font-family: sans-serif;
        z-index: 999;
      }
      #enterBtn {
        margin-top: 20px; padding: 10px 20px;
        background: #1e90ff; border: none;
        color: #fff; font-size: 18px; border-radius: 8px;
        cursor: pointer;
      }
      #fadeOverlay {
        position: absolute; top: 0; left: 0;
        width: 100%; height: 100%;
        background: black; opacity: 0; pointer-events: none;
        transition: opacity 1s ease;
        z-index: 500;
      }
    </style>
  </head>
  <body>
    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªØ±Ø­ÙŠØ¨ -->
    <div id="welcomeScreen">
      <h1>Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ùƒ ÙÙŠ Ø§Ù„Ø¬ÙˆÙ„Ø© Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</h1>
      <p>Ø§Ø³ØªØ¹Ù…Ù„ Ø§Ù„Ù…Ø¤Ø´Ø± ÙˆØ§Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù‡ÙˆØª Ø³Ø¨ÙˆØª Ù„Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯.</p>
      <button id="enterBtn">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¬ÙˆÙ„Ø©</button>
    </div>

    <!-- Ø´Ø§Ø´Ø© Ø§Ù„ØªÙ„Ø§Ø´ÙŠ -->
    <div id="fadeOverlay"></div>

    <!-- Ø§Ù„Ù…Ø´Ù‡Ø¯ -->
    <a-scene>
      <a-entity id="cameraRig">
        <a-camera>
          <a-cursor 
            id="cursor"
            fuse="true" fuse-timeout="1000"
            geometry="primitive: ring; radiusInner: 0.02; radiusOuter: 0.03"
            material="color: cyan; shader: flat"
            position="0 0 -1">
          </a-cursor>
        </a-camera>
      </a-entity>

      <!-- Ø§Ù„Ø®Ù„ÙÙŠØ§Øª -->
      <a-sky id="skyBack" radius="30" opacity="0"></a-sky>
      <a-sky id="skyFront" radius="30" opacity="1"></a-sky>

      <!-- Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ù„Ù„Ù‡ÙˆØª Ø³Ø¨ÙˆØª -->
      <a-entity id="hotspotContainer"></a-entity>
    </a-scene>

    <script>
      const fadeOverlay = document.getElementById('fadeOverlay');
      const skyFront = document.getElementById('skyFront');
      const skyBack = document.getElementById('skyBack');
      const hotspotContainer = document.getElementById('hotspotContainer');

      // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯
      const scenes = {
        scene1: 'https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg',
        scene2: 'https://cdn.aframe.io/360-image-gallery-boilerplate/img/city.jpg',
        scene3: 'https://cdn.aframe.io/360-image-gallery-boilerplate/img/chapel.jpg'
      };

      // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‡ÙˆØª Ø³Ø¨ÙˆØª
      const hotspotsData = {
        scene1: [
          { position: "2 1.5 -3", target: "scene2", img: "https://cdn-icons-png.flaticon.com/512/25/25694.png" }
        ],
        scene2: [
          { position: "-2 1.5 -3", target: "scene3", img: "https://cdn-icons-png.flaticon.com/512/25/25694.png" }
        ],
        scene3: [
          { position: "0 1.5 -3", target: "scene1", img: "https://cdn-icons-png.flaticon.com/512/25/25694.png" }
        ]
      };

      let currentScene = 'scene1';
      skyFront.setAttribute('src', scenes[currentScene]);
      createHotspots(currentScene);

      // Ø´Ø§Ø´Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
      document.getElementById('enterBtn').addEventListener('click', () => {
        document.getElementById('welcomeScreen').style.display = 'none';
      });

      // ØªØºÙŠÙŠØ± Ø§Ù„Ù…Ø´Ù‡Ø¯ Ù…Ø¹ Ø§Ù†ØªÙ‚Ø§Ù„ Ø³Ù„Ø³
      function changeScene(targetScene) {
        // Ø£Ø®ÙÙŠ ÙƒÙ„ Ø§Ù„Ù‡ÙˆØª Ø³Ø¨ÙˆØªØ§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ÙÙˆØ±Ù‹Ø§
        Array.from(hotspotContainer.children).forEach(el => {
          el.setAttribute('visible', 'false');
        });

        fadeOverlay.style.opacity = 1; // Ø§Ø¨Ø¯Ø£ Ø§Ù„ØªÙ„Ø§Ø´ÙŠ
        setTimeout(() => {
          // Ø¨Ø¯Ù‘Ù„ Ø§Ù„ØµÙˆØ±
          skyBack.setAttribute('src', scenes[targetScene]);
          skyBack.setAttribute('opacity', 1);
          skyFront.setAttribute('opacity', 0);

          // Ø¨Ø¹Ø¯ Ø§Ù„ØªÙ„Ø§Ø´ÙŠ Ø£Ø¹Ø¯ Ø§Ù„ØªØ±ØªÙŠØ¨
          setTimeout(() => {
            skyFront.setAttribute('src', scenes[targetScene]);
            skyFront.setAttribute('opacity', 1);
            skyBack.setAttribute('opacity', 0);

            currentScene = targetScene;
            createHotspots(targetScene);

            fadeOverlay.style.opacity = 0;
          }, 1000);
        }, 500);
      }

      // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ù‡ÙˆØª Ø³Ø¨ÙˆØªØ§Øª Ù…Ø¹ Ø§Ù„ØªÙˆÙ‡Ø¬
      function createHotspots(sceneName) {
        hotspotContainer.innerHTML = '';

        hotspotsData[sceneName].forEach(hs => {
          // ğŸ”¹ Ø§Ù„ØªÙˆÙ‡Ø¬
          const glow = document.createElement('a-circle');
          glow.setAttribute('radius', hs.glowSize || 1.2);
          glow.setAttribute('color', '#ffffff');
          glow.setAttribute('opacity', 0.35);
          glow.setAttribute('position', hs.position);
          glow.setAttribute('look-at', '#cameraRig');
          glow.setAttribute('scale', '1 1 1');
          glow.setAttribute('animation__pulse',
            'property: scale; dir: alternate; dur: 2000; loop: true; to: 1.5 1.5 1');

          // ğŸ”¹ Ø§Ù„Ù‡ÙˆØª Ø³Ø¨ÙˆØª
          const el = document.createElement('a-plane');
          el.setAttribute('class', 'hotspot');
          el.setAttribute('position', hs.position);
          el.setAttribute('width', hs.size || 0.6);
          el.setAttribute('height', hs.size || 0.6);
          el.setAttribute('material', `src: url(${hs.img}); transparent: true; shader: flat; opacity: 1`);
          el.setAttribute('look-at', '#cameraRig');
          el.setAttribute('scale', '0 0 0');

          // Ø£Ù†ÙŠÙ…ÙŠØ´Ù† Ø¸Ù‡ÙˆØ±
          el.setAttribute('animation__popin',
            'property: scale; to: 1 1 1; dur: 600; easing: easeOutBack');

          // Ø¨Ø¹Ø¯ Ø§Ù„Ø¸Ù‡ÙˆØ± ÙŠØ¨Ø¯Ø£ Ø§Ù„Ù†Ø¨Ø¶
          el.addEventListener('animationcomplete__popin', () => {
            el.setAttribute('animation__pulse',
              'property: scale; dir: alternate; dur: 1500; loop: true; to: 1.3 1.3 1.3');
          });

          // Ø­Ø¯Ø« Ø§Ù„Ù†Ù‚Ø±
          el.addEventListener('click', () => {
            if (hs.target) {
              changeScene(hs.target);
            }
          });

          hotspotContainer.appendChild(glow);
          hotspotContainer.appendChild(el);
        });
      }
    </script>
  </body>
</html>
